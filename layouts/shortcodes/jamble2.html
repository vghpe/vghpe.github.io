<div class="jamble-embed" style="margin: 1rem 0;">
  <div id="jamble-game"></div>
  <!-- Shortcode: embeds Jamble v2 with optional params -->
</div>

<script src="{{ "games/jamble2/jamble.js" | relURL }}"></script>
<script>
(function () {
  function initJamble() {
    var gameRoot = document.getElementById('jamble-game');
    if (!gameRoot || !(window.Jamble && Jamble.Game)) return;
    try {
      var options = {
        debug: false,
        autoRunOnGround: {{ if .Get "autorun" }}{{ if eq (.Get "autorun") "true" }}true{{ else }}false{{ end }}{{ else }}false{{ end }}
      };
      var game = new Jamble.Game(gameRoot, options);
      game.start();
    } catch (e) {
      console.error('Failed to start Jamble v2', e);
    }
  }
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initJamble, { once: true });
  } else {
    initJamble();
  }
})();
</script>
